function copy(e){var t=document.createElement("input");t.setAttribute("value",$("#"+e).val()),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyPartial(e){const t=document.createElement("textarea");t.value=$("#partial"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyHtml(e){const t=document.createElement("textarea");t.value=$("#"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyHtml(e){const t=document.createElement("textarea");t.value=$("#"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyPartial(e){const t=document.createElement("textarea");t.value=$("#partial"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ActiveStorage=t():e.ActiveStorage=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){"use strict";function n(e){var t=i(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function o(e,t){return"string"==typeof e&&(t=e,e=document),a(e.querySelectorAll(t))}function i(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.disabled,i=n.bubbles,r=n.cancelable,a=n.detail,s=document.createEvent("Event");s.initEvent(t,i||!0,r||!0),s.detail=a||{};try{e.disabled=!1,e.dispatchEvent(s)}finally{e.disabled=o}return s}function a(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}t.d=n,t.c=o,t.b=i,t.a=r,t.e=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(e&&"function"==typeof e[t]){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return e[t].apply(e,o)}}n.d(t,"a",function(){return u});var r=n(6),a=n(8),s=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=0,u=function(){function e(t,n,i){o(this,e),this.id=++l,this.file=t,this.url=n,this.delegate=i}return c(e,[{key:"create",value:function(e){var t=this;r.a.create(this.file,function(n,o){if(n)e(n);else{var r=new a.a(t.file,o,t.url);i(t.delegate,"directUploadWillCreateBlobWithXHR",r.xhr),r.create(function(n){if(n)e(n);else{var o=new s.a(r);i(t.delegate,"directUploadWillStoreFileWithXHR",o.xhr),o.create(function(t){t?e(t):e(null,r.toJSON())})}})}})}}]),e}()},function(e,t,n){"use strict";function o(){window.ActiveStorage&&Object(i.a)()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(1);n.d(t,"start",function(){return i.a}),n.d(t,"DirectUpload",function(){return r.a}),setTimeout(o,1)},function(e,t,n){"use strict";function o(){f||(f=!0,document.addEventListener("submit",i),document.addEventListener("ajax:before",r))}function i(e){a(e)}function r(e){"FORM"==e.target.tagName&&a(e)}function a(e){var t=e.target;if(t.hasAttribute(h))e.preventDefault();else{var n=new u.a(t),o=n.inputs;o.length&&(e.preventDefault(),t.setAttribute(h,""),o.forEach(c),n.start(function(e){t.removeAttribute(h),e?o.forEach(l):s(t)}))}}function s(e){var t=Object(d.b)(e,"input[type=submit]");if(t){var n=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=n}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t)}function c(e){e.disabled=!0}function l(e){e.disabled=!1}t.a=o;var u=n(4),d=n(0),h="data-direct-uploads-processing",f=!1},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var i=n(5),r=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s="input[type=file][data-direct-upload-url]:not([disabled])",c=function(){function e(t){o(this,e),this.form=t,this.inputs=Object(r.c)(t,s).filter(function(e){return e.files.length})}return a(e,[{key:"start",value:function(e){var t=this,n=this.createDirectUploadControllers();this.dispatch("start"),function o(){var i=n.shift();i?i.start(function(n){n?(e(n),t.dispatch("end")):o()}):(e(),t.dispatch("end"))}()}},{key:"createDirectUploadControllers",value:function(){var e=[];return this.inputs.forEach(function(t){Object(r.e)(t.files).forEach(function(n){var o=new i.a(t,n);e.push(o)})}),e}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this.form,"direct-uploads:"+e,{detail:t})}}]),e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var i=n(1),r=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(t,n){o(this,e),this.input=t,this.file=n,this.directUpload=new i.a(this.file,this.url,this),this.dispatch("initialize")}return a(e,[{key:"start",value:function(e){var t=this,n=document.createElement("input");n.type="hidden",n.name=this.input.name,this.input.insertAdjacentElement("beforebegin",n),this.dispatch("start"),this.directUpload.create(function(o,i){o?(n.parentNode.removeChild(n),t.dispatchError(o)):n.value=i.signed_id,t.dispatch("end"),e(o)})}},{key:"uploadRequestDidProgress",value:function(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.file=this.file,t.id=this.directUpload.id,Object(r.a)(this.input,"direct-upload:"+e,{detail:t})}},{key:"dispatchError",value:function(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}}]),e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var i=n(7),r=n.n(i),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,c=function(){function e(t){o(this,e),this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return a(e,null,[{key:"create",value:function(t,n){new e(t).create(n)}}]),a(e,[{key:"create",value:function(e){var t=this;this.callback=e,this.md5Buffer=new r.a.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),n=btoa(t);this.callback(null,n)}}},{key:"fileReaderDidError",value:function(){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=s.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}]),e}()},function(e){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t){var n=e[0],o=e[1],i=e[2],r=e[3];o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[0]-680876936|0)<<7|n>>>25)+o|0)&o|~n&i)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&o)+t[2]+606105819|0)<<17|i>>>15)+r|0)&r|~i&n)+t[3]-1044525330|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[4]-176418897|0)<<7|n>>>25)+o|0)&o|~n&i)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&o)+t[6]-1473231341|0)<<17|i>>>15)+r|0)&r|~i&n)+t[7]-45705983|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[8]+1770035416|0)<<7|n>>>25)+o|0)&o|~n&i)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&o)+t[10]-42063|0)<<17|i>>>15)+r|0)&r|~i&n)+t[11]-1990404162|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[12]+1804603682|0)<<7|n>>>25)+o|0)&o|~n&i)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&o)+t[14]-1502002290|0)<<17|i>>>15)+r|0)&r|~i&n)+t[15]+1236535329|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[1]-165796510|0)<<5|n>>>27)+o|0)&i|o&~i)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&o|n&~o)+t[11]+643717713|0)<<14|i>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[5]-701558691|0)<<5|n>>>27)+o|0)&i|o&~i)+t[10]+38016083|0)<<9|r>>>23)+n|0)&o|n&~o)+t[15]-660478335|0)<<14|i>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[9]+568446438|0)<<5|n>>>27)+o|0)&i|o&~i)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&o|n&~o)+t[3]-187363961|0)<<14|i>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[13]-1444681467|0)<<5|n>>>27)+o|0)&i|o&~i)+t[2]-51403784|0)<<9|r>>>23)+n|0)&o|n&~o)+t[7]+1735328473|0)<<14|i>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[5]-378558|0)<<4|n>>>28)+o|0)^o^i)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^o)+t[11]+1839030562|0)<<16|i>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[1]-1530992060|0)<<4|n>>>28)+o|0)^o^i)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^o)+t[7]-155497632|0)<<16|i>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[13]+681279174|0)<<4|n>>>28)+o|0)^o^i)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^o)+t[3]-722521979|0)<<16|i>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[9]-640364487|0)<<4|n>>>28)+o|0)^o^i)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^o)+t[15]+530742520|0)<<16|i>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|o>>>9)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[0]-198630844|0)<<6|n>>>26)+o|0)|~i))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[14]-1416354905|0)<<15|i>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[12]+1700485571|0)<<6|n>>>26)+o|0)|~i))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[10]-1051523|0)<<15|i>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[8]+1873313359|0)<<6|n>>>26)+o|0)|~i))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[6]-1560198380|0)<<15|i>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[4]-145523070|0)<<6|n>>>26)+o|0)|~i))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[2]+718787259|0)<<15|i>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=r+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var o,i,r,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=l;o+=64)t(u,n(e.substring(o-64,o)));for(i=(e=e.substring(o-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<i;o+=1)r[o>>2]|=e.charCodeAt(o)<<(o%4<<3);if(r[o>>2]|=128<<(o%4<<3),o>55)for(t(u,r),o=0;o<16;o+=1)r[o]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,r[14]=s,r[15]=c,t(u,r),u}function r(e){var n,i,r,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)t(u,o(e.subarray(n-64,n)));for(i=(e=n-64<l?e.subarray(n-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)r[n>>2]|=e[n]<<(n%4<<3);if(r[n>>2]|=128<<(n%4<<3),n>55)for(t(u,r),n=0;n<16;n+=1)r[n]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,r[14]=s,r[15]=c,t(u,r),u}function a(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var n,o=e.length,i=new ArrayBuffer(o),r=new Uint8Array(i);for(n=0;n<o;n+=1)r[n]=e.charCodeAt(n);return t?r:i}function u(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,n){var o=new Uint8Array(e.byteLength+t.byteLength);return o.set(new Uint8Array(e)),o.set(new Uint8Array(t),e.byteLength),n?o:o.buffer}function h(e){var t,n=[],o=e.length;for(t=0;t<o-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,o){var i,r,a,s,c=this.byteLength,l=t(n,c),u=c;return o!==e&&(u=t(o,c)),l>u?new ArrayBuffer(0):(i=u-l,r=new ArrayBuffer(i),a=new Uint8Array(r),s=new Uint8Array(this,l,i),a.set(s),r)}}(),f.prototype.append=function(e){return this.appendBinary(c(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var o,i=this._buff.length;for(o=64;o<=i;o+=64)t(this._hash,n(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},f.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(r,i),n=s(this._hash),e&&(n=h(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,n){var o,i,r,a=n;if(e[a>>2]|=128<<(a%4<<3),a>55)for(t(this._hash,e),a=0;a<16;a+=1)e[a]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),r=parseInt(o[1],16)||0,e[14]=i,e[15]=r,t(this._hash,e)},f.hash=function(e,t){return f.hashBinary(c(e),t)},f.hashBinary=function(e,t){var n=s(i(e));return t?h(n):n},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var n,i=d(this._buff.buffer,e,!0),r=i.length;for(this._length+=e.byteLength,n=64;n<=r;n+=64)t(this._hash,o(i.subarray(n-64,n)));return this._buff=n-64<r?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o[t]<<(t%4<<3);return this._finish(r,i),n=s(this._hash),e&&(n=h(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e=f.prototype.getState.call(this);return e.buff=u(e.buff),e},f.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var n=s(r(new Uint8Array(e)));return t?h(n):n},f})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var i=n(0),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(t,n,r){var a=this;o(this,e),this.file=t,this.attributes={filename:t.name,content_type:t.type,byte_size:t.size,checksum:n},this.xhr=new XMLHttpRequest,this.xhr.open("POST",r,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",Object(i.d)("csrf-token")),this.xhr.addEventListener("load",function(e){return a.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return a.requestDidError(e)})}return r(e,[{key:"create",value:function(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(e){if(this.status>=200&&this.status<300){var t=this.response,n=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var e=this.xhr,t=e.responseType,n=e.response;return"json"==t?n:JSON.parse(n)}}]),e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){var n=this;o(this,e),this.blob=t,this.file=t.file;var i=t.directUploadData,r=i.url,a=i.headers;for(var s in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",r,!0),this.xhr.responseType="text",a)this.xhr.setRequestHeader(s,a[s]);this.xhr.addEventListener("load",function(e){return n.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return n.requestDidError(e)})}return i(e,[{key:"create",value:function(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function(e){var t=this.xhr,n=t.status,o=t.response;n>=200&&n<300?this.callback(null,o):this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),e}()}])}),$(document).on("turbolinks:load",function(){function e(){$(document).keypress("s",function(e){e.ctrlKey&&"s"==e.key&&(e.preventDefault(),"#{@view.name}.html.erb"===tab?(alert("pasooo"),codeHTML.save(id)):"#{@view.name}.scss"===tab?codeCSS.save(id):"#{@view.name}.js"===tab?codeJs.save(id):"Action"===tab&&codeAction.save(id))})}$(document).ready(function(){$("#btn-assets-editor").click(function(){$("#assets-editor").addClass("control-sidebar-open"),e()}),$("#btn-theme-editor").click(function(){$("#theme-editor").addClass("control-sidebar-open"),e()}),$("#btn-views-editor").click(function(){$("#views-editor").addClass("control-sidebar-open"),e()}),$("#close-assets-editor").click(function(){$("#assets-editor").removeClass("control-sidebar-open")}),$("#close-theme-editor").click(function(){$("#theme-editor").removeClass("control-sidebar-open")}),$("#close-views-editor").click(function(){$("#views-editor").removeClass("control-sidebar-open")})})}),function(e){"use strict";function t(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n)}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function o(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function i(e){return e?c.text(e).html():""}function r(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function a(t,n){var o=!1;return e.each(n,function(e,n){if("number"==typeof n&&t.which===n)return o=!0,!1;if(t.which===n.which){var i=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,r=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,a=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(i&&r&&a)return o=!0,!1}}),o}var s={tagClass:function(){return"label label-keppler"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,n,o){var r=this;if(!(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&r.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var a=r.options.delimiterRegex?r.options.delimiterRegex:r.options.delimiter,s=t.split(a);if(s.length>1){for(var c=0;c<s.length;c++)this.add(s[c],!0);return void(n||r.pushVal())}}var l=r.options.itemValue(t),u=r.options.itemText(t),d=r.options.tagClass(t),h=r.options.itemTitle(t),f=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===l})[0];if(!f||r.options.allowDuplicates){if(!(r.items().toString().length+t.length+1>r.options.maxInputLength)){var p=e.Event("beforeItemAdd",{item:t,cancel:!1,options:o});if(r.$element.trigger(p),!p.cancel){r.itemsArray.push(t);var m=e('<span class="tag '+i(d)+(null!==h?'" title="'+h:"")+'">'+i(u)+'<span data-role="remove"></span></span>');if(m.data("item",t),r.findInputWrapper().before(m),m.after(" "),r.isSelect&&!e('option[value="'+encodeURIComponent(l)+'"]',r.$element)[0]){var g=e("<option selected>"+i(u)+"</option>");g.data("item",t),g.attr("value",l),r.$element.append(g)}n||r.pushVal(),(r.options.maxTags===r.itemsArray.length||r.items().toString().length===r.options.maxInputLength)&&r.$container.addClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemAdded",{item:t,options:o}))}}}else if(r.options.onTagExists){var v=e(".tag",r.$container).filter(function(){return e(this).data("item")===f});r.options.onTagExists(t,v)}}}},remove:function(t,n,o){var i=this;if(i.objectItems&&(t=(t="object"==typeof t?e.grep(i.itemsArray,function(e){return i.options.itemValue(e)==i.options.itemValue(t)}):e.grep(i.itemsArray,function(e){return i.options.itemValue(e)==t}))[t.length-1]),t){var r=e.Event("beforeItemRemove",{item:t,cancel:!1,options:o});if(i.$element.trigger(r),r.cancel)return;e(".tag",i.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",i.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,i.itemsArray)&&i.itemsArray.splice(e.inArray(t,i.itemsArray),1)}n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(e.Event("itemRemoved",{item:t,options:o}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),o=n.data("item"),r=t.options.itemValue(o),a=t.options.itemText(o),s=t.options.tagClass(o);(n.attr("class",null),n.addClass("tag "+i(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=i(a),t.isSelect)&&e("option",t.$element).filter(function(){return e(this).data("item")===o}).attr("value",r)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(t){var i=this;if(i.options=e.extend({},s,t),i.objectItems&&(i.options.freeInput=!1),n(i.options,"itemValue"),n(i.options,"itemText"),o(i.options,"tagClass"),i.options.typeahead){var c=i.options.typeahead||{};o(c,"source"),i.$input.typeahead(e.extend({},c,{source:function(t,n){function o(e){for(var t=[],o=0;o<e.length;o++){var a=i.options.itemText(e[o]);r[a]=e[o],t.push(a)}n(t)}this.map={};var r=this.map,a=c.source(t);e.isFunction(a.success)?a.success(o):e.isFunction(a.then)?a.then(o):e.when(a).then(o)},updater:function(e){return i.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(i.options.typeaheadjs){var l=null,u={},d=i.options.typeaheadjs;e.isArray(d)?(l=d[0],u=d[1]):u=d,i.$input.typeahead(l,u).on("typeahead:selected",e.proxy(function(e,t){u.valueKey?i.add(t[u.valueKey]):i.add(t),i.$input.typeahead("val","")},i))}i.$container.on("click",e.proxy(function(){i.$element.attr("disabled")||i.$input.removeAttr("disabled"),i.$input.focus()},i)),i.options.addOnBlur&&i.options.freeInput&&i.$input.on("focusout",e.proxy(function(){0===e(".typeahead, .twitter-typeahead",i.$container).length&&(i.add(i.$input.val()),i.$input.val(""))},i)),i.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),o=i.findInputWrapper();if(i.$element.attr("disabled"))i.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===r(n[0])){var a=o.prev();a.length&&i.remove(a.data("item"))}break;case 46:if(0===r(n[0])){var s=o.next();s.length&&i.remove(s.data("item"))}break;case 37:var c=o.prev();0===n.val().length&&c[0]&&(c.before(o),n.focus());break;case 39:var l=o.next();0===n.val().length&&l[0]&&(l.after(o),n.focus())}var u=n.val().length;Math.ceil(u/5),n.attr("size",Math.max(this.inputSize,n.val().length))}},i)),i.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(i.$element.attr("disabled"))i.$input.attr("disabled","disabled");else{var o=n.val(),r=i.options.maxChars&&o.length>=i.options.maxChars;i.options.freeInput&&(a(t,i.options.confirmKeys)||r)&&(0!==o.length&&(i.add(r?o.substr(0,i.options.maxChars):o),n.val("")),!1===i.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var s=n.val().length;Math.ceil(s/5),n.attr("size",Math.max(this.inputSize,n.val().length))}},i)),i.$container.on("click","[data-role=remove]",e.proxy(function(t){i.$element.attr("disabled")||i.remove(e(t.target).closest(".tag").data("item"))},i)),i.options.itemValue===s.itemValue&&("INPUT"===i.$element[0].tagName?i.add(i.$element.val()):e("option",i.$element).each(function(){i.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,o,i){var r=[];return this.each(function(){var a=e(this).data("tagsinput");if(a)if(n||o){if(void 0!==a[n]){if(3===a[n].length&&void 0!==i)var s=a[n](o,null,i);else s=a[n](o);void 0!==s&&r.push(s)}}else r.push(a);else a=new t(this,n),e(this).data("tagsinput",a),r.push(a),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof n?r.length>1?r:r[0]:r},e.fn.tagsinput.Constructor=t;var c=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);var editor="",editor_css="",editor_js="",editor_js_erb="",editor_action="",editor_callback="",editor_function="",controls={codes:{},save:function(e){this.codes={html:editor.getValue(),css:editor_css.getValue(),js:editor_js.getValue(),actions:editor_action.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$("#code-css").val(editor_css.getValue()),$("#code-js").val(editor_js.getValue()),$("#code-action").val(editor_action.getValue()),$(".html_signal").css("display","none"),$(".scss_signal").css("display","none"),$(".js_signal").css("display","none"),$(".action_signal").css("display","none")})},saveLayout:function(e){this.codes={html:editor.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")})},saveOnlyAction:function(){this.codes={actions:editor.getValue()},$.post("/admin/frontend/views/"+id+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$(".action_signal").css("display","none")})},saveViewJs:function(){this.codes={actions:editor_action.getValue(),js_erb:editor_js_erb.getValue()},$.post("/admin/frontend/views/"+id+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$("#code-js-erb").val(editor_js_erb.getValue()),$(".action_signal").css("display","none"),$(".js_erb_signal").css("display","none")})}},codeHTML={codeMirrorHtml:function(){return $("#code-html").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,showToken:/\w/,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor.getValue()===$("#code-html").val()?$(".html_signal").css("display","none"):$(".html_signal").css("display","block")})}),editor},save:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))},saveLayout:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))}},codeCSS={codeMirrorCSS:function(){return $("#code-css").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_css=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-scss",
keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,showTrailingSpace:!0,tabSize:2,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_css.getValue()===$("#code-css").val()?$(".scss_signal").css("display","none"):$(".scss_signal").css("display","block")})}),editor_css},save:function(e){editor_css.getValue()!==$("#code-css").val()&&(this.codes={css:editor_css.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-css").val(editor_css.getValue()),$(".scss_signal").css("display","none")}))}},codeJs={codeMirrorJs:function(){return $("#code-js").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_js=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_js.getValue()===$("#code-js").val()?$(".js_signal").css("display","none"):$(".js_signal").css("display","block")})}),editor_js},save:function(e){editor_js.getValue()!==$("#code-js").val()&&(this.codes={js:editor_js.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-js").val(editor_js.getValue()),$(".js_signal").css("display","none")}))}},codeJsErb={codeMirrorJsErb:function(){return $("#code-js-erb").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_js_erb=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_js_erb.getValue()===$("#code-js").val()?$(".js_erb_signal").css("display","none"):$(".js_erb_signal").css("display","block")})}),editor_js},save:function(e){editor_js_erb.getValue()!==$("#code-js-erb").val()&&(this.codes={remote_js:editor_js_erb.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-js-erb").val(editor_js_erb.getValue()),$(".js_erb_signal").css("display","none")}))}},codeAction={codeMirrorAction:function(){return $("#code-action").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_action=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_action.getValue()===$("#code-action").val()?$(".action_signal").css("display","none"):$(".action_signal").css("display","block")})}),editor_action},save:function(e){editor_action.getValue()!==$("#code-action").val()&&(this.codes={actions:editor_action.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$(".action_signal").css("display","none")}))}},codeCallback={codeMirrorCallback:function(){return $("#code-callback").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_callback=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",scrollbarStyle:"overlay",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_callback.getValue()===$("#code-action").val()?$(".callback_signal").css("display","none"):$(".callback_signal").css("display","block")})}),editor_callback},save:function(e){editor_callback.getValue()!==$("#code-callback").val()&&(this.codes={actions:editor_callback.getValue()},$.post("/admin/frontend/callback_functions/"+e+"/editor/save",this.codes,function(){$("#code-callback").val(editor_callback.getValue()),$(".callback_signal").css("display","none")}))}},codeFunction={codeMirrorFunction:function(){return $("#code-function").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_function=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,scrollbarStyle:"overlay",showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_function.getValue()===$("#code-function").val()?$(".function_signal").css("display","none"):$(".function_signal").css("display","block")})}),editor_function},save:function(e){editor_function.getValue()!==$("#code-function").val()&&(this.codes={actions:editor_function.getValue()},$.post("/admin/frontend/functions/"+e+"/editor/save",this.codes,function(){$("#code-function").val(editor_callback.getValue()),$(".function_signal").css("display","none")}))}},editor_head="",editor_header="",editor_footer="",controlsLayout={codes:{},save:function(e){this.codes={head:editor_head.getValue(),header:editor_header.getValue(),footer:editor_footer.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-head").val(editor.getValue()),$("#code-header").val(editor_header.getValue()),$("#code-footer").val(editor_footer.getValue()),$(".head_signal").css("display","none"),$(".header_signal").css("display","none"),$(".footer_signal").css("display","none")})}},codeHead={codeMirrorHead:function(){return $("#code-head").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_head=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,scrollbarStyle:"overlay",autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor_head.getValue()===$("#code-head").val()?$(".head_signal").css("display","none"):$(".head_signal").css("display","block")})}),editor_head},saveHead:function(e){editor_head.getValue()!==$("#code-head").val()&&(this.codes={head:editor_head.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-head").val(editor_head.getValue()),$(".head_signal").css("display","none")}))}},codeHeader={codeMirrorHeader:function(){return $("#code-header").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_header=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,scrollbarStyle:"overlay",showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_header.getValue()===$("#code-header").val()?$(".header_signal").css("display","none"):$(".header_signal").css("display","block")})}),editor_header},saveHeader:function(e){editor_header.getValue()!==$("#code-header").val()&&(this.codes={header:editor_header.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-header").val(editor_header.getValue()),$(".header_signal").css("display","none")}))}},codeFooter={codeMirrorFooter:function(){return $("#code-footer").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_footer=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,scrollbarStyle:"overlay",showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_footer.getValue()===$("#code-footer").val()?$(".footer_signal").css("display","none"):$(".footer_signal").css("display","block")})}),editor_footer},saveFooter:function(e){editor_footer.getValue()!==$("#code-footer").val()&&(this.codes={footer:editor_footer.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-footer").val(editor_footer.getValue()),$(".footer_signal").css("display","none")}))}},partial_editor_css=(editor="",""),partial_editor_js="",controlsPartial={codes:{},savePartial:function(e){this.codes={html:editor.getValue(),scss:partial_editor_css.getValue(),js:partial_editor_js.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$("#code-css").val(partial_editor_css.getValue()),$("#code-js").val(partial_editor_js.getValue()),$(".html_signal").css("display","none"),$(".scss_signal").css("display","none"),$(".js_signal").css("display","none")})}},codePartialHTML={codeMirrorHtml:function(){return $("#code-html").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,scrollbarStyle:"overlay",autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor.getValue()===$("#code-html").val()?$(".html_signal").css("display","none"):$(".html_signal").css("display","block")})}),editor},savePartial:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))}},codePartialCSS={codeMirrorCSS:function(){return $("#code-css").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(partial_editor_css=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-scss",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,showTrailingSpace:!0,tabSize:2,scrollbarStyle:"overlay",highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){partial_editor_css.getValue()===$("#code-css").val()?$(".scss_signal").css("display","none"):$(".scss_signal").css("display","block")})}),partial_editor_css},savePartial:function(e){partial_editor_css.getValue()!==$("#code-css").val()&&(this.codes={scss:partial_editor_css.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-css").val(partial_editor_css.getValue()),$(".scss_signal").css("display","none")}))}},codePartialJs={codeMirrorJs:function(){return $("#code-js").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(partial_editor_js=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,scrollbarStyle:"overlay",showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){partial_editor_js.getValue()===$("#code-js").val()?$(".js_signal").css("display","none"):$(".js_signal").css("display","block")})}),partial_editor_js},savePartial:function(e){partial_editor_js.getValue()!==$("#code-js").val()&&(this.codes={js:partial_editor_js.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-js").val(partial_editor_js.getValue()),$(".js_signal").css("display","none")}))}};